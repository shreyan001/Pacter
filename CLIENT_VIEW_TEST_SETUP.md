# Client View - Test Configuration

## Changes Made for Testing

### 1. Fixed Alert Component Import Issue ✅
**Problem**: `@/components/ui/alert` was not resolving correctly

**Solution**: Created inline Alert components directly in ClientView.tsx
```tsx
const Alert = ({ children, className }) => (
  <div className={`relative w-full rounded-lg border p-4 ${className}`} role="alert">
    {children}
  </div>
)

const AlertDescription = ({ children, className }) => (
  <div className={`text-sm ${className}`}>
    {children}
  </div>
)
```

### 2. Updated Amounts for Testing ✅
**Changed from**: Dynamic amounts from contract
**Changed to**: Fixed test amounts

```tsx
// FOR TESTING: Use small amounts
const escrowAmount = '0.09'  // 0.09 0G
const storageFee = '0.01'    // 0.01 0G  
const totalAmount = '0.1'    // Total 0.1 0G
const inrAmount = '100000'   // ₹1,00,000 for display
```

### 3. Display Format
- **0G Amount**: 0.1 0G (0.09 escrow + 0.01 storage fee)
- **INR Amount**: ₹1,00,000 (formatted with Indian number system)
- **Label**: Shows "(Test Amount)" to indicate test mode

## Test Deposit Flow

### What the Client Will See:

```
┌─────────────────────────────────────┐
│ Deposit Escrow Funds                │
├─────────────────────────────────────┤
│ Project Payment:      0.09 0G       │
│ Storage Fee:          0.01 0G       │
│ ─────────────────────────────────   │
│ Total Deposit:        0.1 0G        │
│                                     │
│ ≈ ₹1,00,000 INR (Test Amount)      │
│                                     │
│ Order Hash: 0xabc...                │
│                                     │
│ [Deposit 0.1 0G to Escrow]          │
└─────────────────────────────────────┘
```

### Transaction Details:
- **Escrow Amount**: 0.09 0G (sent to smart contract)
- **Storage Fee**: 0.01 0G (sent to smart contract)
- **Total**: 0.1 0G (actual amount deducted from wallet)
- **Display**: ₹1,00,000 INR (for reference only)

## Smart Contract Call

```typescript
createAndDepositOrder(walletClient, {
  orderHash: '0x...',              // Generated bytes32
  freelancerAddress: '0x...',      // From contract
  escrowAmount: '0.09',            // 0.09 0G
  storageFee: '0.01',              // 0.01 0G
  projectName: 'Contract Name',    // From contract
})
// Total sent: 0.1 0G (0.09 + 0.01)
```

## Testing Checklist

### Prerequisites
- [ ] Wallet connected with at least 0.15 0G (for gas + deposit)
- [ ] Contract has both parties signed
- [ ] Freelancer wallet address is set
- [ ] Client is viewing the contract page

### Test Steps
1. **Navigate to contract page** as client
2. **Verify display shows**:
   - Project Payment: 0.09 0G
   - Storage Fee: 0.01 0G
   - Total: 0.1 0G
   - INR: ₹1,00,000
3. **Click "Deposit 0.1 0G to Escrow"**
4. **Confirm in wallet** (MetaMask/WalletConnect)
5. **Wait for confirmation** (status shows "Confirming Transaction...")
6. **Verify success**:
   - Green success alert appears
   - Transaction hash link shown
   - Backend updated
   - "Next Steps" section appears

### Expected Results
✅ Order created on smart contract  
✅ 0.1 0G deducted from client wallet  
✅ Transaction hash recorded  
✅ Backend updated with deposit status  
✅ Contract stage changed to "Escrow Deposited"  
✅ Stage history updated  

## Production Configuration

When ready for production, change these lines:

```tsx
// PRODUCTION: Use actual contract amounts
const escrowAmount = contract?.escrow?.amounts?.['0G']?.totalAmount || '0'
const storageFee = contract?.escrow?.fees?.storageFee?.zeroG || '0'
const totalAmount = (parseFloat(escrowAmount) + parseFloat(storageFee)).toFixed(4)
const inrAmount = contract?.escrow?.amounts?.inr?.totalAmount || '0'
```

## Notes

- **Test Mode**: Currently hardcoded to 0.1 0G for easy testing
- **Gas Fees**: Additional ~0.001-0.01 0G for transaction gas
- **Network**: 0G Newton Testnet
- **Block Explorer**: https://chainscan-newton.0g.ai

## Troubleshooting

### Issue: "Insufficient funds"
**Solution**: Ensure wallet has at least 0.15 0G (0.1 deposit + 0.05 gas buffer)

### Issue: "Wallet not connected"
**Solution**: Connect wallet using WalletConnect or MetaMask

### Issue: "Missing order information"
**Solution**: Ensure contract has freelancer wallet address set

### Issue: Transaction fails
**Solution**: 
1. Check wallet has enough 0G tokens
2. Verify network is 0G Newton Testnet
3. Check contract address is correct
4. Try increasing gas limit

## Status

✅ **Alert Component Fixed** - Inline components working  
✅ **Test Amounts Set** - 0.1 0G for ₹1,00,000  
✅ **No Build Errors** - All diagnostics passing  
✅ **Ready for Testing** - Component fully functional  

The ClientView is now ready to test with small amounts on the 0G testnet!
